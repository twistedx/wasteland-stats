<section id="admin-section">
  <h2>Admin</h2>
  <div class="tab-bar">
    <a href="/admin/analytics" class="tab">Analytics</a>
    <a href="/admin/bans" class="tab">Ban List</a>
    <a href="/admin/kills" class="tab">Kill Log</a>
    {{#if user.isWriteAdmin}}
      <a href="/admin/money" class="tab">Add Money</a>
      <a href="/admin/skins" class="tab">Skins</a>
    {{/if}}
    {{#if user.isBlogAdmin}}
      <a href="/admin/blog" class="tab active">Blog</a>
    {{/if}}
    <div style="margin-left:auto;display:flex;gap:0.5rem;align-items:center;padding:0 0.5rem;">
      <button type="button" id="open-unban-modal" class="btn btn-admin btn-small" style="background:#22c55e;color:#fff;">Unban Player</button>
      <button type="button" id="open-ban-modal" class="btn btn-admin btn-small" style="background:var(--danger);color:#fff;">Ban Player</button>
    </div>
  </div>

  {{#if successMessage}}
    <div class="success-notice">{{successMessage}}</div>
  {{/if}}
  {{#if errorMessage}}
    <div class="error">{{errorMessage}}</div>
  {{/if}}

  <div class="admin-bar">
    <a href="/admin/blog/new" class="btn btn-admin">New Post</a>
  </div>

  {{#if posts.length}}
    <div class="table-scroll">
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Tags</th>
            <th>Status</th>
            <th>Author</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each posts}}
            <tr>
              <td><a href="/blog/{{this.slug}}" class="blog-table-link">{{this.title}}</a></td>
              <td>{{#each this.tags}}<span class="blog-tag-pill">{{this}}</span> {{/each}}</td>
              <td>
                {{#if this.published}}
                  <span class="blog-status-published">Published</span>
                {{else}}
                  <span class="blog-status-draft">Draft</span>
                {{/if}}
              </td>
              <td class="player-name">{{this.author}}</td>
              <td>{{formatDate this.createdAt}}</td>
              <td class="blog-actions">
                <a href="/admin/blog/edit/{{this.id}}" class="btn btn-small">Edit</a>
                <form method="POST" action="/admin/blog/delete/{{this.id}}" style="display:inline;" onsubmit="return confirm('Delete this post?');">
                  <button type="submit" class="btn btn-small btn-danger">Delete</button>
                </form>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  {{else}}
    <div class="empty-state">No blog posts yet. Create your first post!</div>
  {{/if}}
</section>

{{> ban-modal}}
