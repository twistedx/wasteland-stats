<section id="leaderboard-section">
  <h2>Leaderboard</h2>
  <div class="tab-bar">
    <a href="/?tab=season" class="tab {{#if (eq tab 'season')}}active{{/if}}">Current Season</a>
    <a href="/?tab=alltime" class="tab {{#if (eq tab 'alltime')}}active{{/if}}">All Time</a>
  </div>

  {{#if leaderboardError}}
    <div class="error">Failed to load leaderboard. Please try again.</div>
  {{else if leaderboard.length}}
    <table id="leaderboard-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Player</th>
          <th>Kills</th>
          <th>Deaths</th>
          <th>K/D</th>
          <th>Most Killed</th>
          <th>Nemesis</th>
        </tr>
      </thead>
      <tbody>
        {{#each leaderboard}}
          <tr {{#if (eq @index 0)}}class="rank-1"{{else if (eq @index 1)}}class="rank-2"{{else if (eq @index 2)}}class="rank-3"{{/if}}>
            <td class="rank">{{math @index 1}}</td>
            <td class="player-name">{{fallback this.arma_username "Unknown"}}</td>
            <td>{{formatNumber this.kill_count}}</td>
            <td>{{formatNumber this.deaths}}</td>
            <td>{{fallback this.kdRatio "0.0"}}</td>
            <td>{{fallback this.mostKilled "-"}} ({{fallback this.mostKilledCount "0"}})</td>
            <td>{{fallback this.mostKilledBy "-"}} ({{fallback this.mostKilledByCount "0"}})</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <table id="leaderboard-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Player</th>
          <th>Kills</th>
          <th>Deaths</th>
          <th>K/D</th>
          <th>Most Killed</th>
          <th>Nemesis</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="7" class="empty">No data available</td></tr>
      </tbody>
    </table>
  {{/if}}
</section>
